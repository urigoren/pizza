<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mr. Braun's Concert Visuals</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; }
        canvas { display: block; }
    </style>
</head>
<body>
<canvas id="canvas"></canvas>

<script>
/**
 * RECREATION: 90s Glam Rock Concert Hallucination
 * PARAMETERS:
 * - 20mg THC (Simulated via 'drift' and 'trails')
 * - Visuals: Pizza-like triangles, blurry borders
 * - Math: Sinus, Cosinus, Exponential Decay
 */

const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let width, height, centerX, centerY;
let time = 0;

// BRAUN'S CONSTANTS
const DECAY_RATE = 0.92; // Exponential decay for the "memory slots"/trails
const BLUR_AMOUNT = 20;  // The "blurry borders"
const SLICES = 12;       // The "pizza" slices

function resize() {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
    centerX = width / 2;
    centerY = height / 2;
}

window.addEventListener('resize', resize);
resize();

function drawTriangle(angle, radius, oscillation) {
    const x = centerX + Math.cos(angle) * (radius * oscillation);
    const y = centerY + Math.sin(angle) * (radius * oscillation);
    
    // The "Shape of the bit"
    ctx.beginPath();
    ctx.moveTo(centerX, centerY); // Center point
    
    // Triangle points modulated by sinus waves to make them "dance"
    let p1x = centerX + Math.cos(angle - 0.2) * radius;
    let p1y = centerY + Math.sin(angle - 0.2) * radius;
    let p2x = centerX + Math.cos(angle + 0.2) * radius;
    let p2y = centerY + Math.sin(angle + 0.2) * radius;

    ctx.lineTo(p1x, p1y);
    ctx.lineTo(p2x, p2y);
    ctx.closePath();

    // Coloring: Shifting hues to match the "glam rock" lighting
    // Using time to cycle colors, similar to stage lights
    const hue = (time * 50 + angle * 180 / Math.PI) % 360;
    ctx.fillStyle = `hsla(${hue}, 70%, 50%, 0.6)`;
    ctx.fill();
    
    // The "Blurry Borders"
    ctx.shadowBlur = BLUR_AMOUNT;
    ctx.shadowColor = `hsla(${hue}, 100%, 50%, 1)`;
    ctx.lineWidth = 2;
    ctx.strokeStyle = `hsla(${hue}, 100%, 80%, 0.8)`;
    ctx.stroke();
    
    // Reset shadow for performance/cleanliness
    ctx.shadowBlur = 0;
}

function animate() {
    // EXPONENTIAL DECAY:
    // Instead of clearing the frame completely (ctx.clearRect), we draw a 
    // semi-transparent black rectangle. This creates trails that fade out 
    // exponentially, mimicking the "short term memory" impairment.
    ctx.fillStyle = `rgba(0, 0, 0, ${1 - DECAY_RATE})`;
    ctx.fillRect(0, 0, width, height);

    // Global time step
    time += 0.01;

    // "Dancing" logic
    // We use Sin and Cos to create a non-linear, organic movement
    // reminiscent of the "figures dancing according to the music"
    const pulse = Math.sin(time * 3) * 0.5 + 1.5; // Base beat
    const rotationDrift = Math.cos(time * 0.5);   // Slow head drift

    for (let i = 0; i < SLICES; i++) {
        const angle = (Math.PI * 2 / SLICES) * i + time + rotationDrift;
        
        // Radius fluctuates with an exponential curve to create "snappy" visual expansion
        // resembling the kick drum or sudden guitar rifts
        const radius = Math.min(width, height) * 0.35 * Math.exp(Math.sin(time * 2) * 0.3);
        
        drawTriangle(angle, radius, pulse);
    }

    requestAnimationFrame(animate);
}

animate();

</script>
</body>
</html>
